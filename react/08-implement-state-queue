https://react.dev/learn/queueing-a-series-of-state-updates#implement-the-state-queue-yourself